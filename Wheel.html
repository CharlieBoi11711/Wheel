<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spinning Wheel</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        canvas {
            margin-top: 20px;
        }
        #result {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }
        #spinButton, #resetButton {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1.2em;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }
        #spinButton:hover, #resetButton:hover {
            background-color: #45a049;
        }
        #resetButton {
            background-color: #f44336;
        }
    </style>
</head>
<body>
    <h1>Spin the Wheel!</h1>
    <canvas id="wheelCanvas" width="500" height="500"></canvas>
    <div id="result"></div>
    <button id="spinButton">Spin!</button>
    <button id="resetButton">Reset Wheel</button>

    <script>
        const originalOptions = [
            "Option 1", "Option 2", "Option 3", "Option 4", "Option 5",
            "Option 6", "Option 7", "Option 8", "Option 9", "Option 10",
            "Option 11", "Option 12", "Option 13", "Option 14", "Option 15",
            "Option 16", "Option 17", "Option 18", "Option 19", "Option 20"
        ];

        let options = [...originalOptions]; // Copy original options
        const probabilities = Array(options.length).fill(1 / options.length); // Equal probabilities

        const canvas = document.getElementById("wheelCanvas");
        const ctx = canvas.getContext("2d");
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 200;

        let currentAngle = 0;
        let spinTimeout = null;
        let spinAngleStart = 0;
        let spinTime = 0;
        let spinTimeTotal = 0;
        let currentResult = null; // Track the current result

        // Colors for segments
        const colors = [
            "#FF6347", "#FFD700", "#32CD32", "#1E90FF", "#FF1493",
            "#8A2BE2", "#FF4500", "#00CED1", "#2E8B57", "#FF69B4",
            "#D2691E", "#DC143C", "#FF8C00", "#4682B4", "#9ACD32",
            "#7B68EE", "#FFD700", "#98FB98", "#D8BFD8", "#FF4500"
        ];

        // Draw the wheel
        const drawWheel = () => {
            const totalSegments = options.length;
            const arc = 2 * Math.PI / totalSegments;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the segments
            for (let i = 0; i < totalSegments; i++) {
                const startAngle = currentAngle + i * arc;
                const endAngle = startAngle + arc;

                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, startAngle, endAngle, false);
                ctx.closePath();
                ctx.fillStyle = colors[i % colors.length]; // Cycle through colors
                ctx.fill();
                ctx.strokeStyle = "black";
                ctx.stroke();

                // Add text
                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(startAngle + arc / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = "white";
                ctx.font = "16px Arial";
                ctx.fillText(options[i], radius - 10, 5);
                ctx.restore();
            }

            // Draw the marker
            ctx.fillStyle = "red";
            ctx.beginPath();
            ctx.moveTo(centerX - 10, centerY - radius - 20);
            ctx.lineTo(centerX + 10, centerY - radius - 20);
            ctx.lineTo(centerX, centerY - radius - 5);
            ctx.closePath();
            ctx.fill();
        };

        // Start the rotation of the wheel
        const rotateWheel = () => {
            spinTime += 30;

            if (spinTime >= spinTimeTotal) {
                stopRotateWheel();
                return;
            }

            const spinAngle = spinAngleStart * (spinTimeTotal - spinTime) / spinTimeTotal;
            currentAngle += (spinAngle * Math.PI / 180);
            currentAngle %= (2 * Math.PI);
            drawWheel();
            spinTimeout = setTimeout(rotateWheel, 30);
        };

        // Stop rotation and show result
        const stopRotateWheel = () => {
            clearTimeout(spinTimeout);

            const totalSegments = options.length;
            const arc = 2 * Math.PI / totalSegments;
            const degrees = (currentAngle * 180 / Math.PI) + 90;
            const adjustedAngle = (360 - degrees % 360) % 360;
            const segmentIndex = Math.floor(adjustedAngle / (360 / totalSegments));
            const result = options[segmentIndex];

            document.getElementById("result").textContent = `The wheel landed on: ${result}`;

            // Store the result but don't remove it until next spin
            currentResult = result;

            // Redraw the wheel with the same options
            drawWheel();
        };

        // Spin button click event
        document.getElementById("spinButton").addEventListener("click", () => {
            if (options.length === 0) {
                return; // Do nothing if all options have been used
            }

            // If there is a previous result, remove it only when the user clicks Spin again
            if (currentResult) {
                const index = options.indexOf(currentResult);
                if (index > -1) {
                    options.splice(index, 1); // Remove the previous result from options
                }
                currentResult = null; // Reset the current result
            }

            spinAngleStart = Math.random() * 10 + 10; // Random spin speed
            spinTime = 0;
            spinTimeTotal = Math.random() * 3000 + 3000; // Spin duration
            rotateWheel();
        });

        // Reset button click event
        document.getElementById("resetButton").addEventListener("click", () => {
            options = [...originalOptions]; // Restore all options
            document.getElementById("spinButton").disabled = false; // Enable the spin button
            document.getElementById("result").textContent = ""; // Clear result
            drawWheel(); // Redraw the full wheel
        });

        // Draw the initial wheel
        drawWheel();
    </script>
</body>
</html>
